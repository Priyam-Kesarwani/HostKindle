<%- include('../partials/head') %>
  </head>

  <body class="bg-base-100 text-base-content min-h-screen flex flex-col font-sans selection:bg-primary selection:text-white">
    <%- include('../partials/nav') %>

      <main class="container mx-auto px-4 py-10 max-w-7xl animate-fade-in">
        <div
          class="flex items-center justify-between mb-8 sticky top-20 z-40 bg-neutral/80 backdrop-blur-md py-4 border-b border-white/5">
          <h2 class="text-2xl md:text-3xl font-display font-bold text-white truncate pr-4">
            <%= home.houseName %> <span class="text-gray-500 font-sans text-xl font-normal hidden sm:inline">| Photo
                Gallery</span>
          </h2>
          <a href="/homes/<%= home._id %>"
            class="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-xl transition-all border border-white/5 font-medium whitespace-nowrap">
            <i class="fas fa-arrow-left"></i> Back
          </a>
        </div>

        <% if (!photos || photos.length===0) { %>
          <div class="text-center py-20">
            <i class="far fa-images text-6xl text-gray-700 mb-4"></i>
            <p class="text-gray-400 text-xl">No photos available for this home.</p>
          </div>
          <% } else { %>
            <div class="columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-4 space-y-4">
              <% photos.forEach((photo, idx)=> { %>
                <div
                  class="break-inside-avoid relative group rounded-2xl overflow-hidden border border-white/5 bg-neutral-900 shadow-lg hover:shadow-2xl transition-all animate-slide-up"
                  style="animation-delay: <%= idx * 50 %>ms;">
                  <a href="<%= photo %>" target="_blank" rel="noopener noreferrer" class="block cursor-zoom-in">
                    <img src="<%= photo %>" alt="<%= home.houseName %> - Photo <%= idx + 1 %>"
                      class="w-full h-auto object-cover transform group-hover:scale-105 transition-transform duration-500"
                      loading="lazy" onerror="this.parentElement.parentElement.style.display='none';" />
                    <div
                      class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors pointer-events-none">
                    </div>
                  </a>
                </div>
                <% }) %>
            </div>
            <% } %>

      </main>
  </body>

  </html>